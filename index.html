<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Tabela de Acessibilidade de Sites de Prefeituras Brasileiras</title>
    <!-- <link rel="stylesheet" href="css/styles.css"> -->
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/@picocss/pico@1/css/pico.min.css">
    <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
</head>
<body class="container">
    <header>
        <hgroup>
            <h1>Auditoria de Sites de Prefeituras Brasileiras</h1>
            <h2>Performance, Acessibilidade, SEO e Boas Práticas</h2>
        </hgroup>
        <nav>
            <ul>
                <li><a href="about.html" role="button" class="secondary">Saiba mais sobre o projeto</a></li>
            </ul>
        </nav>
    </header>

    <section id="project-description">
        <p>Este projeto apresenta dados de performance, acessibilidade, SEO e boas práticas dos sites das prefeituras do Brasil, coletados via PageSpeed Insights. Use os campos de busca e ordenação para explorar as informações na tabela abaixo. Gráficos de distribuição de pontuações também são apresentados.</p>
    </section>

    <main>
        <article id="charts-container">
            <hgroup>
                <h2>Distribuição das Pontuações</h2>
                <h3>Visualização gráfica das métricas coletadas</h3>
            </hgroup>
            <div class="grid">
                <div>
                    <canvas id="performanceChart" role="img" aria-label="Gráfico de distribuição de pontuações de Performance"></canvas>
                    <div id="performanceChartFallbackMessage" class="chart-fallback-message" style="display: none;"></div>
                </div>
                <div>
                    <canvas id="accessibilityChart" role="img" aria-label="Gráfico de distribuição de pontuações de Acessibilidade"></canvas>
                    <div id="accessibilityChartFallbackMessage" class="chart-fallback-message" style="display: none;"></div>
                </div>
            </div>
            <div class="grid">
                <div>
                    <canvas id="seoChart" role="img" aria-label="Gráfico de distribuição de pontuações de SEO"></canvas>
                    <div id="seoChartFallbackMessage" class="chart-fallback-message" style="display: none;"></div>
                </div>
                <div>
                    <canvas id="bestPracticesChart" role="img" aria-label="Gráfico de distribuição de pontuações de Boas Práticas"></canvas>
                    <div id="bestPracticesChartFallbackMessage" class="chart-fallback-message" style="display: none;"></div>
                </div>
            </div>
        </article>

        <section id="table-controls-container">
            <label for="table-filter" class="sr-only">Filtrar por URL ou código IBGE</label>
            <input type="search" id="table-filter" name="table-filter" placeholder="Filtrar por URL ou código IBGE">
            <button id="export-data-btn">Exportar Dados (JSON/CSV)</button>
        </section>

        <section id="table-container">
            <h2>Resultados Detalhados</h2>
            <figure>
                <table id="psi-results-table" role="grid">
                    <caption class="sr-only">Resultados detalhados da auditoria de sites. A tabela mostra URL, pontuações de Performance, Acessibilidade, SEO, Boas Práticas e o Timestamp da coleta.</caption>
                    <thead>
                        <tr>
                            <th scope="col">URL</th>
                            <th scope="col">Performance</th>
                            <th scope="col">Accessibility</th>
                            <th scope="col">SEO</th>
                            <th scope="col">Best Practices</th>
                            <th scope="col">Timestamp</th>
                        </tr>
                    </thead>
                    <tbody>
                        <!-- Data will be populated by js/main.js -->
                    </tbody>
                </table>
            </figure>
        </section>
    </main>

    <script src="js/data-processor.js"></script>
    <script src="js/chart-generator.js"></script> <!-- Added chart generator -->
    <script src="js/main.js"></script>

    <style>
        /* Essential custom styles */
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }

        /* Score background colors for table cells */
        .score-good {
            background-color: #c8e6c9; /* Consider PicoCSS success color variables if available/desired */
            color: #1b5e20; /* Ensure text contrast */
        }
        .score-ok {
            background-color: #fff3cd; /* Consider PicoCSS warning color variables */
            color: #664d03; /* Ensure text contrast */
        }
        .score-bad {
            background-color: #f8d7da; /* Consider PicoCSS danger color variables */
            color: #58151c; /* Ensure text contrast */
        }

        /* Chart styling */
        /* Ensure canvas is responsive within its grid container */
        canvas {
            max-width: 100%;
            height: auto !important; /* Important to override potential inline styles from Chart.js if needed */
            border: 1px solid var(--card-border-color, var(--border-color, #e1e1e1)); /* Use Pico variable */
            border-radius: var(--border-radius);
        }
        #charts-container article > div { /* The .grid divs */
            margin-bottom: var(--spacing);
        }
        #charts-container hgroup {
            margin-bottom: var(--spacing);
        }

        /* Fallback message styling */
        .chart-fallback-message {
            padding: var(--spacing);
            text-align: center;
            color: var(--muted-color);
            font-style: italic;
            border: 1px dashed var(--muted-border-color);
            border-radius: var(--border-radius);
        }

    </style>

    <footer>
        <small>
            © 2024 Acessibilidade Brasil. Todos os direitos reservados.
            <br>
            <a href="https://github.com/usuario/nome-do-repositorio" id="repo-link">Ver no GitHub</a> |
            <a href="https://github.com/usuario/nome-do-repositorio/issues" id="report-issue-link">Reportar um Problema</a> |
            <a href="about.html#data-sources" id="data-sources-link">Fontes dos Dados</a>
        </small>
    </footer>
</body>
</html>
